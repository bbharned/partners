!function(r){r.fn.lightbox_me=function(a){return this.each(function(){function o(){s[0].style,t.destroyOnClose?s.add(l).remove():s.add(l).hide(),t.parentLightbox&&t.parentLightbox.fadeIn(200),t.preventScroll&&r("body").css("overflow",""),d.remove(),s.undelegate(t.closeSelector,"click"),s.unbind("close",o),s.unbind("repositon",n),r(window).unbind("resize",i),r(window).unbind("resize",n),r(window).unbind("scroll",n),r(window).unbind("keyup.lightbox_me"),t.onClose()}function e(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&t.closeEsc&&o()}function i(){r(window).height()<r(document).height()?(l.css({height:r(document).height()+"px"}),d.css({height:r(document).height()+"px"})):l.css({height:"100%"})}function n(){if(s[0].style,s.css({left:"50%",marginLeft:s.outerWidth()/2*-1,zIndex:t.zIndex+3}),s.height()+80>=r(window).height()&&"absolute"!=s.css("position")){var e=r(document).scrollTop()+40;s.css({position:"absolute",top:e+"px",marginTop:0})}else s.height()+80<r(window).height()&&(t.centered?s.css({position:"fixed",top:"50%",marginTop:s.outerHeight()/2*-1}):s.css({position:"fixed"}).css(t.modalCSS),t.preventScroll&&r("body").css("overflow","hidden"))}var t=r.extend({},r.fn.lightbox_me.defaults,a),l=r(),s=r(this),d=r('<iframe id="foo" style="z-index: '+(t.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(t.showOverlay){var c=r(".js_lb_overlay:visible");l=r(0<c.length?'<div class="lb_overlay_clear js_lb_overlay"/>':'<div class="'+t.classPrefix+'_overlay js_lb_overlay"/>')}r("body").append(s.hide()).append(l),t.showOverlay&&(i(),l.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:t.zIndex+2,display:"none"}),l.hasClass("lb_overlay_clear")||l.css(t.overlayCSS)),t.showOverlay?l.fadeIn(t.overlaySpeed,function(){n(),s[t.appearEffect](t.lightboxSpeed,function(){i(),n(),t.onLoad()})}):(n(),s[t.appearEffect](t.lightboxSpeed,function(){t.onLoad()})),t.parentLightbox&&t.parentLightbox.fadeOut(200),r(window).resize(i).resize(n).scroll(n),r(window).bind("keyup.lightbox_me",e),t.closeClick&&l.click(function(e){o(),e.preventDefault}),s.delegate(t.closeSelector,"click",function(e){o(),e.preventDefault()}),s.bind("close",o),s.bind("reposition",n)})},r.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,preventScroll:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery);